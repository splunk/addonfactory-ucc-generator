import{j as a}from"./jsx-runtime-1FKYbnEZ.js";import{r as g}from"./index-prPvd6Su.js";import{f as L,b as m,M as V,g as b}from"./ControlWrapper-C-3SaADr.js";import{q as W}from"./omit-UcH284-_.js";import{u as Y,a as J,T as O,b as K}from"./usePlatform-B4VghJKE.js";import{i as c}from"./messageUtil-CvmCOD_s.js";import{g as X}from"./util-BVaVe7dF.js";import{T as Z,S as ee,E as te}from"./EntityPage-BdiuKLGt.js";import{T as se,P as h}from"./TableContext-gysp-n-m.js";import{T as A,S as ae}from"./TableWrapper-BeDoGR6W.js";import{M as ne,R as oe}from"./MenuInput-CsrF3Y9W.js";import{E as ie}from"./EntityModal-Dj1UFiw1.js";import{E as re}from"./ErrorBoundary-oRjb1fsE.js";import{S as le}from"./SubDescription-4r8vjCf1.js";import{P as me}from"./PageContext-DhAckcxo.js";import{s as q}from"./pageContext-DllO6PNg.js";import{u as ce,a as pe}from"./index-CCTXOnLi.js";const ue=W(b.Row)`
    padding: 5px 0px;

    .title_menu_column {
        width: auto !important;
    }

    .page_subtitle {
        min-height: 20px;
    }

    .dropdown {
        text-align: right;
    }
`;function de(e){return e!==void 0&&"description"in e}function fe(e){return e!==void 0&&"table"in e}function ge(){const[e,r]=g.useState({open:!1}),S=X(),x=Y(S,"inputs"),p=S.pages.inputs;let n=[],v,E,N,T;p&&(fe(p)?({services:n,title:v,table:E,description:N,subDescription:T}=p,n=n.filter(t=>!q(t.hideForPlatform,x))):({services:n,title:v}=p,n=n.filter(t=>!q(t.hideForPlatform,x))));const i=!E,[u,j]=g.useState(n[0].name),P=n.find(t=>t.name===u),F=de(P),$=[L,m,V],k=n.map(t=>t.name),d=ce(),s=J();g.useEffect(()=>{G(),z()},[pe().search]);const G=()=>{const t=n.find(o=>o.name===s.get("service"));s&&t&&$.includes(s.get("action")||"")&&!e.open?s.get("action")!==m&&e.stanzaName?r({...e,open:!0,isInputPageStyle:!0,serviceName:s.get("service")||"",mode:s.get("action")||""}):r({...e,open:!0,isInputPageStyle:!0,serviceName:s.get("service")||"",formLabel:`Create ${t?.title}`,mode:m}):(!s.get("service")||!s.get("action"))&&e.open&&e.isInputPageStyle&&r({...e,open:!1})},z=()=>{s&&k.includes(s.get("service")||"")&&j(s.get("service")||"")},_=({serviceName:t,groupName:o,input:f})=>{const l=n.find(D=>D.name===t),y=l?.title,I=l?.formTitle,M=l?.style===ae;if(r({...e,open:!0,serviceName:t,mode:m,formLabel:I?`Add ${I}`:`Add ${y}`,isInputPageStyle:M,groupName:o}),M){s.set("service",t),s.set("action",m);const R=f||(o&&o!==oe?o:null)||t;R?s.set("input",R):s.delete("input"),d({search:s.toString()})}},U=()=>{r({...e,open:!1})},w=()=>e.serviceName&&a.jsx(ie,{page:h,open:e.open,handleRequestClose:U,returnFocus:()=>{},serviceName:e.serviceName,mode:m,formLabel:e.formLabel,groupName:e.groupName}),C=(t,o)=>{const f=n.find(y=>y.name===t.serviceName),l=f?.formTitle||f?.title;r({...e,open:!0,isInputPageStyle:!0,serviceName:t.serviceName,stanzaName:t.name,formLabel:o===L?`Clone ${l}`:`Update ${l}`,mode:o}),s.set("service",t.serviceName),s.set("action",o),d({search:s.toString()})},B=()=>{r({...e,open:!1}),i||s.delete("service"),s.delete("action"),d({search:s.toString()})},Q=()=>e.serviceName&&e.mode?a.jsx(te,{handleRequestClose:B,serviceName:e.serviceName,stanzaName:e.stanzaName,mode:e.mode,formLabel:e.formLabel,page:h,groupName:e.groupName}):null,H=g.useCallback((t,{selectedTabId:o})=>{o&&(j(o),s.delete("action"),s.set("service",o),d({search:s.toString()}))},[u]);return a.jsx(re,{children:a.jsx(me,{platform:x,children:a.jsxs(se,{children:[e.isInputPageStyle&&e.open?Q():null,a.jsxs("div",{style:e.isInputPageStyle&&e.open?{display:"none"}:{display:"block"},children:[a.jsx(b,{gutter:8,children:a.jsxs(ue,{children:[a.jsxs(b.Column,{className:i?"title_menu_column":"",span:9,children:[a.jsx(Z,{children:i?c._(P?.title||""):c._(v||"")}),a.jsx(ee,{className:i?"pageSubtitle":void 0,children:i?c._(F?P?.description:""):c._(N||"")}),a.jsx(le,{text:T?.text||"",links:T?.links})]}),a.jsx(b.Column,{className:i?"title_menu_column":"dropdown",span:3,children:!i&&a.jsx(ne,{handleRequestOpen:_})})]})}),i?a.jsxs(a.Fragment,{children:[a.jsx(O,{activeTabId:u,onChange:H,children:n.map(t=>a.jsx(O.Tab,{label:c._(t.title),tabId:t.name},t.name))}),n.map(t=>a.jsx("div",{style:t.name!==u?{display:"none"}:{display:"block"},id:`${t.name}Tab`,children:a.jsx(A,{page:h,serviceName:t.name,handleRequestModalOpen:()=>_({serviceName:t.name}),handleOpenPageStyleDialog:C})},t.name))]}):a.jsx(A,{page:h,handleOpenPageStyleDialog:C,displayActionBtnAllRows:!0}),a.jsx(K,{position:"top-right"}),!e.isInputPageStyle&&e.open?w():null]})]})})})}ge.__docgenInfo={description:"",methods:[],displayName:"InputPage"};export{ge as I};
