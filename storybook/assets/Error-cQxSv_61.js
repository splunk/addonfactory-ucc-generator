import{j as t}from"./jsx-runtime-1FKYbnEZ.js";import{R as l,r as u}from"./index-prPvd6Su.js";import{d as b,E as h,a as x}from"./EnterpriseViewOnlyPreset-Tq4Un-2D.js";import{B as g}from"./Button-VhSyjuIj.js";import{v as E}from"./variables-BwqdKhvQ.js";import{q as y}from"./omit-CSe7u5nZ.js";import{S as C}from"./searchUtil-wH5rnTF1.js";import{w as s,g as R}from"./utils-B2DNkapl.js";import{g as v}from"./util-DDtLIPUa.js";import{F as S}from"./consts-BpCQqH5Z.js";import"./_commonjsHelpers-CE1G-McA.js";import"./messageUtil-CQS9-IEm.js";import"./Number-BH7oUVAk.js";import"./isEqual-BwSphrxz.js";import"./_baseIteratee-ksDslDTl.js";import"./Date-Cmj0Txw8.js";import"./Clickable-DCLrgFHL.js";import"./includes-BAN5eljv.js";import"./ScreenReaderContent-DTgcavZU.js";import"./ChevronLeft-Ct0yUEYy.js";import"./ChevronRight-DDG3shYt.js";import"./Button-B9G_4Mfe.js";import"./ButtonSimple-DKTsOMzA.js";import"./Popover-FB-oYrLK.js";import"./_arrayIncludesWith-CeAjGiZp.js";import"./Box-BIQRv08s.js";import"./index-BQPxV8oF.js";import"./AnimationToggle-C6vyuf54.js";import"./ScrollContainerContext-XRarVF06.js";import"./ExclamationTriangle-D5UvzwJa.js";import"./Tooltip-B7RmVpsU.js";import"./InformationCircle-B-Mq5DmP.js";import"./Menu-IFF89z9L.js";import"./Divider-BmXthNdG.js";import"./Dropdown-_2BgLkF4.js";import"./url-cUhQ41mg.js";import"./Link-BguIxQc6.js";import"./CollapsiblePanel-aG-BiLiH.js";import"./_baseDifference-B9g_NAZa.js";import"./WaitSpinner-D3j-Jqu7.js";import"./Search-CSAXqH99.js";import"./index-Da2o7s9M.js";import"./DotsThreeVertical-HMD4oTrZ.js";import"./TabBar-z2TtPu3E.js";import"./iframe-DjmNRUro.js";import"./index-BAMY2Nnw.js";import"./Message-YpcZhUvQ.js";import"./Modal-DV21QR2P.js";import"./ErrorBoundary-BWXGMgQA.js";import"./Heading-Rzy1Th7C.js";import"./pick-BmRvtkqO.js";import"./index-CgKxIibQ.js";import"./Error-bkCWZDit.js";import"./ArrowBroadUnderbarDown-Aasyo1c4.js";import"./script-wa9wuYzj.js";import"./url-xolDOGfA.js";const w="Open in Search",A=y(g)`
    max-width: fit-content;
    font-size: ${E.fontSize};
    align-content: flex-end;
    place-self: end;
    grid-column: 2;
    grid-row: 4;
    bottom: 8px;
`,O=({dashboardDefinition:r})=>{const e=l.useRef(),p=v(),_=l.useCallback(n=>{e.current=n},[]);return u.useEffect(()=>{s('[data-input-id="errors_tab_input"][data-input-type="input.timerange"]',"#errors_tab_description_viz"),s('[data-input-id="errors_type_input"][data-input-type="input.multiselect"]',"#errors_tab_errors_list_viz"),s("#open_search_error_events_tab_with_types","#errors_tab_errors_list_viz")},[]),u.useEffect(()=>{if(!e?.current)return()=>{};const d=C.create({search:`index=_internal source=*${p.meta.restRoot}* log_level=ERROR | dedup exc_l | table exc_l`,earliest_time:"0",latest_time:"now"},{cache:!0,cancelOnUnload:!0}).getResults().subscribe(a=>{if(a?.results?.length){const i=JSON.parse(JSON.stringify(r));i.inputs.errors_type_input.options.items=[{label:"All",value:"*"}],a.results.sort((o,f)=>{const m=o.exc_l.toUpperCase(),c=f.exc_l.toUpperCase();return m<c?-1:m>c?1:0}).forEach(o=>i.inputs.errors_type_input.options.items.push({label:o.exc_l,value:`"${o.exc_l}"`})),e.current?.updateDefinition(i)}});return()=>{d.unsubscribe()}},[r,p.meta.restRoot,e]),r?t.jsx(b.DashboardContextProvider,{preset:h,initialDefinition:r,featureFlags:S,children:t.jsxs(t.Fragment,{children:[t.jsx(A,{id:"open_search_error_events_tab_with_types",label:w,openInNewContext:!0,onClick:()=>document.querySelector('#errors_tab_errors_list_viz [data-test="open-search-button"]')?.click()}),t.jsx(x.DashboardCore,{width:"100%",height:"auto",actionMenus:R("error"),dashboardCoreApiRef:_})]})}):null};O.__docgenInfo={description:"",methods:[],displayName:"ErrorDashboard",props:{dashboardDefinition:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"unknown"}],raw:"Record<string, unknown>"},description:""}}};export{O as ErrorDashboard,O as default};
